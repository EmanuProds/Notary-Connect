<!DOCTYPE html>
<html lang="pt-BR" data-theme="light"> <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atendimento ao Cliente</title>
    <link rel="stylesheet" href="./css/chatStyles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="chat-container">
        <aside class="sidebar">
            <header class="sidebar-header">
                <div class="user-profile">
                    <img src="./img/icons/logo.svg" alt="Logo do Usuário" class="user-avatar" id="user-avatar-sidebar" onerror="this.style.display='none'; this.parentElement.insertAdjacentHTML('afterbegin', '<div class=\'avatar-placeholder\'>U</div>');">
                    <div class="user-info">
                        <span class="user-name" id="user-name">Nome do Atendente</span>
                        <span class="user-status" id="user-status">Online</span>
                    </div>
                </div>
                <div class="sidebar-actions">
                    <button id="logout-button" class="icon-button" title="Sair">
                        <img src="./img/icons/logout.svg" alt="Sair" class="icon-img" onerror="this.parentElement.innerHTML = '<i class=\'fas fa-sign-out-alt\'></i>';">
                    </button>
                </div>
            </header>

            <div class="search-container">
                <input type="text" id="search-input" placeholder="Pesquisar ou começar uma nova conversa">
                <img src="./img/icons/search.svg" alt="Ícone de Pesquisa" class="search-icon icon-img" onerror="this.style.display='none'">
            </div>

            <div class="tabs">
                <button class="tab-button active" data-tab="active">Ativos</button>
                <button class="tab-button" data-tab="closed">Encerrados</button>
            </div>

            <div class="conversations-list" id="conversations-list">
                <div class="empty-list-message">Carregando conversas...</div>
                </div>
        </aside>

        <main class="chat-area">
            <div class="welcome-screen" id="welcome-screen">
                <img src="./img/icons/logo.svg" alt="Logo Principal" class="welcome-logo" onerror="this.style.display='none'; this.parentElement.insertAdjacentHTML('afterbegin', '<div class=\'logo-placeholder-large\'>LOGO</div>');">
                <h2>Bem-vindo ao Atendimento</h2>
                <p>Selecione uma conversa para começar.</p>
                <p class="app-version">Versão 1.0.0</p>
            </div>

            <div class="chat-interface" id="chat-interface" style="display: none;">
                <header class="chat-header">
                    <button id="back-to-sidebar-button" class="icon-button back-to-sidebar-button" title="Voltar para lista">
                        <img src="./img/icons/arrow-left.svg" alt="Voltar" class="icon-img" onerror="this.parentElement.innerHTML = '<i class=\'fas fa-arrow-left\'></i>';">
                    </button>
                    <img src="https://placehold.co/40x40/E0E0E0/757575?text=C" alt="Avatar do Contato" class="contact-avatar" id="contact-avatar" onerror="this.style.display='none'; this.parentElement.insertAdjacentHTML('beforeend', '<div class=\'avatar-placeholder\'>C</div>');">
                    <div class="contact-info" id="contact-details-div">
                        <span class="contact-name" id="contact-name">Nome do Contato</span>
                        </div>
                    <div class="chat-actions">
                        <button id="transfer-button" class="icon-button" title="Transferir Chat">
                            <img src="./img/icons/transfer.svg" alt="Transferir" class="icon-img" onerror="this.parentElement.innerHTML = '<i class=\'fas fa-random\'></i>';">
                        </button>
                        <button id="close-chat-button" class="icon-button" title="Encerrar Chat">
                           <img src="./img/icons/close.svg" alt="Encerrar" class="icon-img" onerror="this.parentElement.innerHTML = '<i class=\'fas fa-times-circle\'></i>';">
                        </button>
                    </div>
                </header>

                <div class="messages-container" id="messages-container">
                    </div>

                <div class="typing-indicator" id="typing-indicator" style="display: none;">
                    Alguém está digitando...
                </div>

                <footer class="input-area">
                    <button id="attachment-button" class="icon-button" title="Anexar">
                        <img src="./img/icons/attachment.svg" alt="Anexar" class="icon-img" onerror="this.parentElement.innerHTML = '<i class=\'fas fa-paperclip\'></i>';">
                    </button>
                    <input type="file" id="file-input" style="display: none;">
                    <textarea id="message-input" placeholder="Digite sua mensagem..." rows="1"></textarea>
                    <button id="send-button" class="icon-button primary" title="Enviar">
                        <img src="./img/icons/send.svg" alt="Enviar" class="icon-img" onerror="this.parentElement.innerHTML = '<i class=\'fas fa-paper-plane\'></i>';">
                    </button>
                </footer>
            </div>
        </main>
    </div>

    <div id="transfer-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Transferir Conversa</h2>
                <button class="close-modal icon-button" title="Fechar">
                    <img src="./img/icons/close.svg" alt="Fechar" class="icon-img" onerror="this.parentElement.innerHTML = '<span>&times;</span>';">
                </button>
            </div>
            <div class="modal-body">
                <div class="transfer-options">
                    <label for="transfer-type">Transferir para:</label>
                    <select id="transfer-type">
                        <option value="sector">Setor</option>
                        <option value="attendant">Atendente</option>
                    </select>
                </div>
                <div id="sectors-list-container">
                    <label for="sectors-list-select">Setores:</label>
                    <select id="sectors-list-select">
                        <option value="">Carregando setores...</option>
                    </select>
                </div>
                <div id="attendants-list-container" style="display:none;">
                    <label for="attendants-list-select">Atendentes:</label>
                    <select id="attendants-list-select">
                        <option value="">Carregando atendentes...</option>
                    </select>
                </div>
                <label for="transfer-message">Mensagem (opcional):</label>
                <textarea id="transfer-message" placeholder="Deixe uma mensagem para o próximo atendente ou setor"></textarea>
            </div>
            <div class="modal-footer">
                <button id="confirm-transfer-button" class="button">Confirmar Transferência</button>
            </div>
        </div>
    </div>

    <div id="alert-modal" class="alert-container">
        </div>
    
    <script src="./js/chatUtils.js"></script>
    <script src="./js/chatDomElements.js"></script>
    <script src="./js/notificationService.js"></script>
    <script src="./js/chatUiUpdater.js"></script>
    <script src="./js/chatWebsocketService.js"></script>
    <script src="./js/chatActions.js"></script>
    <script src="./js/chatEventHandlers.js"></script>
    <script src="./js/mainChatScript.js"></script> </body>
</html>
