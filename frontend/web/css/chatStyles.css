/* frontend/web/css/chatStyles.css */
:root {
    --chat-primary-color: #4f46e5; /* Indigo (Tailwind indigo-600) */
    --chat-primary-hover: #4338ca; /* Indigo mais escuro (Tailwind indigo-700) */
    --chat-secondary-color: #64748b; /* Cinza ardósia (Tailwind slate-500) */
    --chat-success-color: #10b981; /* Verde (Tailwind emerald-500) */
    --chat-warning-color: #f59e0b; /* Âmbar (Tailwind amber-500) */
    --chat-danger-color: #ef4444; /* Vermelho (Tailwind red-500) */
    --chat-info-color: #3b82f6; /* Azul (Tailwind blue-500) */
    
    --chat-text-light: #f8fafc; /* Cinza muito claro (Tailwind slate-50) */
    --chat-text-dark: #0f172a; /* Cinza muito escuro (Tailwind slate-900) */
    --chat-text-muted: #64748b; /* Cinza ardósia (Tailwind slate-500) */

    --chat-bg-page: #f1f5f9; /* Fundo da página (Tailwind slate-100) */
    --chat-bg-sidebar: #ffffff; /* Sidebar branca */
    --chat-bg-chat-area: #f8fafc; /* Fundo da área de chat (slate-50) */
    --chat-bg-messages: #e2e8f0; /* Fundo do container de mensagens (slate-200) */
    --chat-bg-input-area: #ffffff; /* Fundo da área de input */

    --chat-border-color: #cbd5e1; /* Cor da borda (Tailwind slate-300) */
    --chat-border-radius: 0.375rem; /* rounded-md (6px) */
    --chat-box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); /* Sombra sutil */
    --chat-font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
    --chat-transition: all 0.2s ease-in-out;

    --chat-sidebar-width: 300px; 
    --chat-header-height: 64px; 
    --chat-input-area-height: 64px; 

    --chat-client-message-bg: #ffffff; 
    --chat-agent-message-bg: var(--chat-primary-color); 
    --chat-system-message-bg: #f1f5f9; 
}

* { margin: 0; padding: 0; box-sizing: border-box; }
html, body { height: 100%; font-family: var(--chat-font-family); background-color: var(--chat-bg-page); color: var(--chat-text-dark); overflow: hidden; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }

.chat-container { display: flex; height: 100vh; width: 100%; background-color: var(--chat-bg-sidebar); }

/* --- Sidebar --- */
.sidebar {
  width: var(--chat-sidebar-width);
  height: 100%;
  background-color: var(--chat-bg-sidebar);
  border-right: 1px solid var(--chat-border-color);
  display: flex;
  flex-direction: column;
  transition: width var(--chat-transition);
  z-index: 10;
}

.sidebar-header {
  height: var(--chat-header-height);
  padding: 0 1rem; 
  display: flex;
  align-items: center;
  border-bottom: 1px solid var(--chat-border-color);
  background-color: var(--chat-primary-color);
  color: var(--chat-text-light);
  flex-shrink: 0;
}
.sidebar-header .logo { width: 30px; height: 30px; margin-right: 0.75rem; filter: brightness(0) invert(1); }
.sidebar-header h1 { font-size: 1.125rem; font-weight: 600; }

.sidebar .tabs { display: flex; border-bottom: 1px solid var(--chat-border-color); background-color: #f8fafc; flex-shrink: 0; }
.sidebar .tabs .tab-button {
  flex: 1; padding: 0.75rem 0.5rem; background: none; border: none; cursor: pointer;
  color: var(--chat-text-muted); font-weight: 500; font-size: 0.875rem; 
  transition: var(--chat-transition); border-bottom: 3px solid transparent;
  display: flex; align-items: center; justify-content: center; gap: 0.375rem; 
}
.sidebar .tabs .tab-button svg { width: 16px; height: 16px; opacity: 0.7; }
.sidebar .tabs .tab-button:hover { color: var(--chat-primary-color); }
.sidebar .tabs .tab-button.active { color: var(--chat-primary-color); border-bottom-color: var(--chat-primary-color); font-weight: 600; }
.sidebar .tabs .tab-button.active svg { opacity: 1; }

.search-container { padding: 0.75rem 1rem; border-bottom: 1px solid var(--chat-border-color); display: flex; align-items: center; background-color: #f8fafc; flex-shrink: 0; }
#search-input { 
  flex: 1; border: 1px solid var(--chat-border-color); background-color: white;
  padding: 0.5rem 0.75rem; font-size: 0.875rem; color: var(--chat-text-dark);
  border-radius: var(--chat-border-radius);
}
#search-input:focus { outline: none; border-color: var(--chat-primary-color); box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.2); }
#search-input::placeholder { color: #9ca3af; }

.conversations-list { flex-grow: 1; overflow-y: auto; }
.empty-list-message { padding: 2rem 1rem; text-align: center; color: var(--chat-text-muted); font-style: italic; }
.empty-list-message.error-message { color: var(--chat-danger-color); font-style: normal; font-weight: 500; }

.chat-item {
  padding: 0.875rem 1rem; border-bottom: 1px solid var(--chat-border-color);
  cursor: pointer; transition: background-color var(--chat-transition);
  display: flex; align-items: flex-start; 
}
.chat-item:hover { background-color: #f1f5f9; }
.chat-item.active { background-color: #eef2ff; border-left: 3px solid var(--chat-primary-color); padding-left: calc(1rem - 3px); }
.chat-item.unread .chat-item-name { font-weight: 700; color: var(--chat-text-dark); }
.chat-item.unread .chat-item-preview { color: var(--chat-text-dark); font-weight: 500;}

.chat-item-profile-pic { width: 40px; height: 40px; border-radius: 50%; background-color: var(--chat-border-color); margin-right: 0.75rem; flex-shrink: 0; object-fit: cover; }
.chat-item-info { flex-grow: 1; min-width: 0; display: flex; flex-direction: column; }
.chat-item-name-status { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 0.125rem; }
.chat-item-name { font-weight: 500; font-size: 0.9375rem; color: var(--chat-text-dark); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-right: 0.5rem; }
.chat-item-id { font-size: 0.75rem; color: var(--chat-text-muted); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-top: 0.125rem; }
.chat-item-preview { font-size: 0.8125rem; color: var(--chat-text-muted); margin-top: 0.25rem; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; max-width: calc(var(--chat-sidebar-width) - 120px); }

.chat-item-meta { display: flex; flex-direction: column; align-items: flex-end; margin-left: 0.5rem; flex-shrink: 0; }
.chat-item-timestamp { font-size: 0.75rem; color: var(--chat-text-muted); white-space: nowrap; }
.unread-badge {
    background-color: var(--chat-primary-color); color: white; padding: 0.125rem 0.375rem; 
    border-radius: 9999px; font-size: 0.6875rem; font-weight: 600; 
    margin-top: 0.25rem; min-width: 1.25rem; text-align: center;
}
.chat-status-indicator {
  padding: 0.125rem 0.5rem; border-radius: 9999px; font-size: 0.625rem; 
  font-weight: 700; text-transform: uppercase; letter-spacing: 0.025em; white-space: nowrap;
}
.chat-status-indicator.active { background-color: var(--chat-success-color); color: white; }
.chat-status-indicator.pending { background-color: var(--chat-warning-color); color: #78350f; }
.chat-status-indicator.closed { background-color: var(--chat-secondary-color); color: white; }

.take-chat-button {
    margin-top: 0.5rem; padding: 0.375rem 0.75rem; background-color: var(--chat-success-color);
    color: white; border: none; border-radius: var(--chat-border-radius); cursor: pointer;
    font-size: 0.75rem; font-weight: 500; transition: background-color var(--chat-transition);
    align-self: flex-start; 
}
.take-chat-button:hover { background-color: #059669; }

.user-info { margin-top: auto; padding: 1rem; border-top: 1px solid var(--chat-border-color); display: flex; align-items: center; background-color: #f8fafc; flex-shrink: 0; }
.user-avatar img { width: 36px; height: 36px; border-radius: 50%; margin-right: 0.75rem; object-fit: cover; }
.user-details #user-name { font-weight: 600; display: block; font-size: 0.875rem; }
.user-details #user-status { font-size: 0.75rem; color: var(--chat-success-color); }
.logout-button {
    margin-left: auto; padding: 0.5rem 0.75rem; font-size: 0.8rem; 
    background-color: var(--chat-secondary-color); color: white; border: none;
    border-radius: var(--chat-border-radius); cursor: pointer; transition: background-color var(--chat-transition);
}
.logout-button:hover { background-color: #4b5563; }

/* --- Área do Chat --- */
.chat-area {
  flex-grow: 1;
  display: flex;
  flex-direction: column;
  height: 100%; 
  overflow: hidden; /* Importante para que o messages-container possa ter seu próprio scroll */
  background-color: var(--chat-bg-chat-area);
}

.chat-header {
  background-color: var(--chat-bg-sidebar); 
  color: var(--chat-text-dark);
  padding: 0 1.5rem; 
  font-weight: 600; 
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-shrink: 0; /* Não encolher */
  border-bottom: 1px solid var(--chat-border-color);
  min-height: var(--chat-header-height); /* Garante altura mínima */
  box-sizing: border-box;
}
.chat-header .contact-info { display: flex; align-items: center; gap: 0.75rem; }
#contact-avatar { width: 36px; height: 36px; border-radius: 50%; object-fit: cover; }
#chatHeaderName { font-size: 1rem; font-weight: 600; } /* Nome do contato no header */
#contact-number { font-size: 0.8125rem; color: var(--chat-text-muted); display: block; } /* Para exibir abaixo do nome se necessário */
#chatHeaderIcon { display: none; }

.chat-header .chat-actions { display: flex; gap: 0.5rem; }
.chat-header .action-button {
    padding: 0.5rem 1rem; border: none; border-radius: var(--chat-border-radius);
    cursor: pointer; font-size: 0.875rem; font-weight: 500; 
    transition: background-color var(--chat-transition); display: inline-flex;
    align-items: center; gap: 0.5rem; 
}
#transfer-button { background-color: var(--chat-info-color); color: white; }
#transfer-button:hover { background-color: #2563eb; }
#end-chat-button { background-color: var(--chat-danger-color); color: white; } /* Renomeado de close-chat-button */
#end-chat-button:hover { background-color: #b91c1c; }
.chat-header .action-button svg { width: 16px; height: 16px;}


.messages-container {
    flex-grow: 1; /* Ocupa o espaço disponível */
    padding: 1rem 1.5rem; 
    overflow-y: auto; /* Scroll aqui */
    display: flex;
    flex-direction: column;
    gap: 0.75rem; 
    background-color: var(--chat-bg-messages);
}
.welcome-screen, .no-chat-selected {
    flex-grow: 1; display: flex; flex-direction: column;
    justify-content: center; align-items: center;
    font-size: 1.125rem; color: var(--chat-text-muted);
    text-align: center; padding: 2rem; 
    background-color: var(--chat-bg-chat-area); 
}
.welcome-screen .welcome-logo, .no-chat-selected .welcome-logo { width: 64px; height: 64px; margin-bottom: 1rem; opacity: 0.5; }
.welcome-screen h2, .no-chat-selected h3 { font-size: 1.25rem; font-weight: 600; margin-bottom: 0.5rem; color: var(--chat-text-dark); }
.welcome-screen p, .no-chat-selected p { font-size: 0.9375rem; }

.message {
    padding: 0.625rem 1rem; border-radius: var(--chat-border-radius); 
    max-width: 70%; word-wrap: break-word; position: relative;
    box-shadow: var(--chat-box-shadow); line-height: 1.6; font-size: 0.875rem; 
}
.message.client { background-color: var(--chat-client-message-bg); align-self: flex-start; color: var(--chat-text-dark); border-top-left-radius: 0.125rem; }
.message.agent { background-color: var(--chat-agent-message-bg); color: var(--chat-text-light); align-self: flex-end; border-top-right-radius: 0.125rem; }
.message.bot { background-color: #e0e7ff; /* indigo-200, cor para o bot */ color: #3730a3; /* indigo-800 */ align-self: flex-start; border-top-left-radius: 0.125rem; }
.message.system { background-color: var(--chat-system-message-bg); color: var(--chat-text-muted); align-self: center; font-style: italic; font-size: 0.8rem; max-width: 90%; text-align: center; border: 1px dashed var(--chat-border-color); box-shadow: none; margin-top: 0.5rem; margin-bottom: 0.5rem; }

.message .sender-name { font-size: 0.75rem; font-weight: 600; margin-bottom: 0.25rem; color: var(--chat-primary-color); }
.message.client .sender-name { color: var(--chat-secondary-color); }
.message.bot .sender-name { color: #5b21b6; /* violet-700 */ }


.message-info { font-size: 0.6875rem; color: #9ca3af; margin-top: 0.25rem; display: block; text-align: right; }
.message.client .message-info, .message.bot .message-info { text-align: left; color: #6b7280; }
.message.agent .message-info { color: #e0e7ff; }

.message .media-content { max-width: 100%; height: auto; display: block; margin-top: 0.5rem; border-radius: 0.25rem; }
.message .media-content.image { max-height: 250px; object-fit: contain; }
.message .media-content.video { max-height: 250px; }
.message .media-content.audio { width: 100%; }
.message .media-content.document {
    display: inline-flex; align-items: center; gap: 0.5rem;
    background-color: #eef2ff; /* indigo-50 */ padding: 0.5rem 0.75rem; 
    border-radius: var(--chat-border-radius); color: var(--chat-primary-color);
    text-decoration: none; font-weight: 500; transition: background-color 0.2s;
    font-size: 0.875rem; 
}
.message .media-content.document:hover { background-color: #e0e7ff; /* indigo-100 */ }
.message .media-content.document .btn-icon { width: 1.125rem; height: 1.125rem; } 


.typing-indicator { font-style: italic; color: var(--chat-text-muted); padding: 0 1.5rem 0.5rem; font-size: 0.8125rem; height: 1.5rem; flex-shrink: 0; }

.input-area { /* Renomeado de chat-input-controls para input-area para consistência com HTML */
    display: flex; padding: 0.75rem 1.5rem; 
    min-height: var(--chat-input-area-height); /* Garante altura mínima */
    border-top: 1px solid var(--chat-border-color);
    flex-shrink: 0; /* Não encolher */
    background-color: var(--chat-bg-input-area);
    align-items: center;
    gap: 0.75rem; 
}
#message-input {
    flex-grow: 1; padding: 0.625rem 1rem; 
    border: 1px solid var(--chat-border-color);
    border-radius: 1.25rem; font-size: 0.875rem; 
    background-color: #f1f5f9; 
}
#message-input:focus { outline: none; border-color: var(--chat-primary-color); background-color: white; box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.2); }
#attachment-button, #send-button { 
    padding: 0.625rem; background-color: transparent; color: var(--chat-secondary-color);
    border: none; border-radius: 50%; cursor: pointer;
    transition: background-color var(--chat-transition), color var(--chat-transition);
    display: inline-flex; align-items: center; justify-content: center;
    width: 36px; height: 36px; 
}
#attachment-button:hover, #send-button:hover { background-color: #eef2ff; color: var(--chat-primary-color); }
#attachment-button img, #send-button svg { width: 20px; height: 20px; }
#send-button svg { fill: currentColor; }


#file-input { display: none; }
.connection-status { /* ... (estilos existentes) ... */ }
.alert-modal { /* ... (estilos existentes) ... */ }
.modal { /* ... (estilos existentes) ... */ }
.modal-content { /* ... (estilos existentes) ... */ }

/* --- Media Queries --- */
@media (max-width: 768px) { 
  .chat-container { flex-direction: column; }
  .sidebar { width: 100%; height: auto; max-height: 40vh; border-right: none; border-bottom: 1px solid var(--chat-border-color); }
  .chat-area { height: auto; flex-grow: 1; }
  .messages-container { padding: 1rem; }
  .input-area { padding: 0.5rem 1rem; }
  .modal-content { width: 95%; margin-top: 5vh; }
}
@media (max-width: 480px) { 
    .sidebar-header h1 { font-size: 1rem; }
    .chat-header #chatHeaderName { font-size: 0.9375rem; }
    .chat-header .action-button { padding: 0.5rem 0.75rem; font-size: 0.8125rem; }
    .chat-header .action-button svg { width: 14px; height: 14px; }
    .message { font-size: 0.8125rem; }
    .input-area #message-input { padding: 0.5rem 0.875rem; font-size: 0.875rem; }
    #attachment-button, #send-button { width: 32px; height: 32px; }
    #attachment-button img, #send-button svg { width: 18px; height: 18px; }
}
